{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 33c511eafa184f95b7b7","webpack:///./src/index.ts","webpack:///./src/meiosis.ts","webpack:///./src/wire.ts"],"names":[],"mappings":"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","file":"meiosis.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"meiosis\"] = factory();\n\telse\n\t\troot[\"meiosis\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 33c511eafa184f95b7b7","export * from \"./meiosis\";\nexport * from \"./actions\";\nexport * from \"./component\";\nexport * from \"./config\";\nexport * from \"./nextAction\";\nexport * from \"./postRender\";\nexport * from \"./ready\";\nexport * from \"./receive\";\nexport * from \"./renderer\";\nexport * from \"./state\";\nexport * from \"./view\";\nexport * from \"./wire\";\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","import { Component } from \"./component\";\nimport { Config, InitialModel } from \"./config\";\nimport { NextAction, NextActionFromActions } from \"./nextAction\";\nimport { PostRender } from \"./postRender\";\nimport { Ready } from \"./ready\";\nimport { Receive } from \"./receive\";\nimport { Renderer } from \"./renderer\";\nimport { State } from \"./state\";\nimport { Emitter, Listener, WireCreator, Wire, defaultWireCreator } from \"./wire\";\n\nexport interface RenderRoot<M, S> {\n  (state: S): any;\n  initialModel: M;\n  state: State<M, S>;\n}\n\nexport interface RunConfig<M, S, V> {\n  renderer: Renderer<S, V>;\n  rootComponent: Component<S, V>;\n  initialModel?: M;\n  state?: State<M, S>;\n}\n\nexport interface Run<M, S, V> {\n  (runConfig: RunConfig<M, S, V>): RenderRoot<M, S>;\n}\n\nexport interface CreateComponent<M, S, V, P> {\n  <A>(config: Config<M, S, V, P, A>): Component<S, V>;\n}\n\nexport interface MeiosisApp<M, S, V, P> {\n  createComponent: CreateComponent<M, S, V, P>;\n  run: Run<M, S, V>;\n}\n\nconst REFUSE_PROPOSAL = {};\nlet nextId = 1;\n\nconst copy = (obj: any): any => JSON.parse(JSON.stringify(obj));\n\nfunction newInstance<M, S, V, P>(): MeiosisApp<M, S, V, P> {\n  let allInitialModels: Array<InitialModel<M>> = [];\n  let allStates: Array<State<M, S>> = [];\n  let allReceives: Array<Receive<M, P>> = [];\n  let allReadies: Array<Ready<P, any>> = [];\n  let allPostRenders: Array<PostRender<S>> = [];\n  let allNextActions: Array<NextActionFromActions<M, P>> = [];\n\n  const createRootWire: WireCreator<M> = defaultWireCreator();\n  const createComponentWire: WireCreator<P> = defaultWireCreator();\n  const rootWire: Wire<M> = createRootWire(\"meiosis_\" + (nextId++));\n  const componentWire: Wire<P> = createComponentWire();\n  const propose: Emitter<P> = componentWire.emit;\n\n  function createComponent<A>(config: Config<M, S, V, P, A>): Component<S, V> {\n    if (!config || (\n      !config.actions &&\n      !config.nextAction &&\n      !config.initialModel &&\n      !config.ready &&\n      !config.receive &&\n      !config.state &&\n      !config.view &&\n      !config.postRender\n    )) {\n      throw new Error(\"Please specify a config when calling createComponent.\");\n    }\n    const initialModel: InitialModel<M> = config.initialModel;\n\n    if (initialModel) {\n      if (typeof initialModel !== \"function\") {\n        throw new Error(\"initialModel in createComponent must be a function. You can pass the root initialModel object to the run function.\");\n      }\n      allInitialModels.push(initialModel);\n    }\n\n    const state: State<M, S> = config.state;\n    if (state) {\n      allStates.push(state);\n    }\n\n    const actions: A | Emitter<P> = config.actions ? config.actions(propose) : propose;\n\n    const receive: Receive<M, P> = config.receive;\n    if (receive) {\n      allReceives.push(receive);\n    }\n\n    const ready: Ready<P, A> = config.ready;\n    if (ready) {\n      allReadies.push(() => ready(actions));\n    }\n\n    const postRender: PostRender<S> = config.postRender;\n    if (postRender) {\n      allPostRenders.push(postRender);\n    }\n\n    const nextAction: NextAction<M, P, A> = config.nextAction;\n    if (nextAction) {\n      allNextActions.push((model: M, proposal: P) => nextAction(model, proposal, actions));\n    }\n\n    return function(state: S): V {\n      return config.view ? config.view(state, actions) : undefined;\n    };\n  };\n\n  const run: Run<M, S, V> = (runConfig: RunConfig<M, S, V>): RenderRoot<M, S> => {\n    let rootModel: any = runConfig.initialModel || {};\n    allInitialModels.forEach((initialModel: Function) => rootModel = initialModel(rootModel));\n\n    let rootState: State<any, any> = runConfig.state || ( (model: M) => model );\n    allStates.forEach((stateFunction: State<M, S>) => {\n      const prevState = rootState;\n      rootState = (model: M, state: S): S => stateFunction(model, prevState(model))\n    });\n\n    componentWire.listen((proposal: any) => {\n      let accepted = true;\n\n      for (let i: number = 0; i < allReceives.length; i++) {\n        const receive: Receive<M, P> = allReceives[i];\n        const received: M = receive(rootModel, proposal);\n\n        if (received === REFUSE_PROPOSAL) {\n          accepted = false;\n          break;\n        }\n        else {\n          rootModel = received;\n        }\n      };\n\n      if (accepted) {\n        rootWire.emit(rootModel);\n        allNextActions.forEach((nextAction: NextActionFromActions<M, P>) => nextAction(rootModel, proposal));\n      }\n    });\n\n    const renderRoot_: any = (state: S) => {\n      const result: any = runConfig.renderer(state, runConfig.rootComponent);\n      allPostRenders.forEach((postRender: PostRender<S>) => postRender(state));\n      return result;\n    };\n    renderRoot_.initialModel = rootModel;\n    renderRoot_.state = rootState;\n\n    const renderRoot: RenderRoot<M, S> = renderRoot_;\n\n    rootWire.listen((model: M) => renderRoot(rootState(model)));\n\n    rootWire.emit(rootModel);\n    allReadies.forEach((ready: Function) => ready());\n\n    const devtool: any = window[\"__MEIOSIS_TRACER_DEVTOOLS_GLOBAL_HOOK__\"];\n    if (devtool) {\n      const initialModel = copy(rootModel);\n      const bufferedReceives: Array<any> = [];\n      let devtoolInitialized: boolean = false;\n\n      createComponent({\n        receive: (model: any, proposal: any) => {\n          if (devtoolInitialized) {\n            window.postMessage({ type: \"MEIOSIS_RECEIVE\", model, proposal }, \"*\");\n          }\n          else {\n            bufferedReceives.push({model: copy(model), proposal});\n          }\n          return model;\n        }\n      });\n      window.addEventListener(\"message\", evt => {\n        if (evt.data.type === \"MEIOSIS_RENDER_ROOT\") {\n          renderRoot(evt.data.model);\n        }\n        else if (evt.data.type === \"MEIOSIS_REQUEST_INITIAL_MODEL\") {\n          window.postMessage({ type: \"MEIOSIS_INITIAL_MODEL\", model: initialModel }, \"*\");\n          devtoolInitialized = true;\n\n          for (let i: number = 0; i < bufferedReceives.length; i++) {\n            const { model, proposal }: any = bufferedReceives[i];\n            window.postMessage({ type: \"MEIOSIS_RECEIVE\", model, proposal }, \"*\");\n          }\n        }\n      });\n    }\n\n    return renderRoot;\n  };\n\n  return {\n    createComponent,\n    run\n  };\n}\n\nconst instance = newInstance<any, any, any, any>();\nconst createComponent = instance.createComponent;\nconst run = instance.run;\n\nexport {\n  newInstance,\n  createComponent,\n  run,\n  REFUSE_PROPOSAL\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/meiosis.ts","export interface Listener<P> {\n  (proposal: P): void;\n}\n\nexport interface Emitter<P> {\n  (proposal: P): void;\n}\n\nexport interface Wire<P> {\n  emit: Emitter<P>;\n  listen(listener: Listener<P>): any;\n}\n\nexport interface WireCreator<P> {\n  (wireName?: string): Wire<P>;\n}\n\nlet wires = {};\nlet nextWireId = 1;\n\nexport function defaultWireCreator<P>(): WireCreator<P> {\n  const createWire = function(): Wire<P> {\n    let listener: Listener<P> = null;\n    const listen = (lstnr: Listener<P>) => listener = lstnr;\n    const emit = (proposal: P) => listener(proposal);\n\n    return { emit, listen };\n  };\n\n  return function(wireName: string) {\n    let name = wireName;\n\n    if (!name) {\n      name = \"wire_\" + nextWireId;\n      nextWireId++;\n    }\n\n    let theWire: Wire<P> = wires[name];\n\n    if (!theWire) {\n      theWire = createWire();\n      wires[name] = theWire;\n    }\n\n    return theWire;\n  };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/wire.ts"],"sourceRoot":""}