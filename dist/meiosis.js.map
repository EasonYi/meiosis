{"version":3,"sources":["webpack:///webpack/bootstrap 9ae75c395933cd5d184f","webpack:///./src/index.ts","webpack:///./src/meiosis.ts","webpack:///./src/merge.ts","webpack:///./src/wire.ts"],"names":[],"mappings":"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","file":"meiosis.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 9ae75c395933cd5d184f\n **/","import { meiosis } from \"./meiosis\";\n\nexport default meiosis;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.ts\n **/","import { Adapters } from \"./adapters\";\nimport { Config } from \"./config\";\nimport { Merger, defaultMerge } from \"./merge\";\nimport { Receiver } from \"./receivers\";\nimport { Emitter, Listener, WireCreator, Wire, defaultWire } from \"./wire\";\n\ninterface Component {\n  (props: any): any;\n}\n\ninterface CreateComponent {\n  (config: Config): Component;\n}\n\ninterface MeiosisInstance {\n  createComponent: CreateComponent;\n}\n\ninterface Meiosis {\n  (adapters: Adapters): MeiosisInstance;\n}\n\nconst meiosis = (adapters: Adapters) => {\n  let allReceivers: Array<Receiver> = [];\n\n  const wire: WireCreator = adapters.wire || defaultWire;\n  const rootWire = wire(\"meiosis\");\n\n  const merge: Merger = adapters.merge || defaultMerge;\n\n  let rootModel: any = {};\n\n  const createComponent = (config: Config) => {\n    if (!config || !config.view) {\n      throw new Error(\"At a minimum, you need to specify a view to create a component.\");\n    }\n    rootModel = merge(rootModel, config.initialModel || {});\n\n    const componentWire: Wire = wire();\n    const next: Emitter = componentWire.emit;\n    const nextAction = {next};\n    const actions = config.actions ? merge(nextAction, config.actions(next)) : nextAction;\n\n    const receivers: Array<Receiver> = config.receivers;\n    if (receivers && Array === receivers.constructor) {\n      Array.prototype.push.apply(allReceivers, receivers);\n    }\n\n    componentWire.listen((update: any) => {\n      const updateTr: any = config.transform ? config.transform(rootModel, update) : update;\n\n      allReceivers.forEach((receiver: Receiver) => {\n        rootModel = receiver(rootModel, updateTr);\n        return rootModel;\n      });\n\n      rootWire.emit(rootModel);\n\n      if (config.chain) {\n        config.chain(update, actions);\n      }\n    });\n\n    return (props: any) => config.view(merge({}, props, {actions}));\n  };\n\n  const run = (root: Component) => {\n    if (allReceivers.length === 0) {\n      allReceivers.push(merge);\n    }\n    const renderRoot = (model: any) => { adapters.render(root({ model })); };\n    rootWire.listen(renderRoot);\n\n    rootWire.emit(rootModel);\n\n    return renderRoot;\n  };\n\n  return { createComponent, run };\n};\n\nexport { meiosis };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/meiosis.ts\n **/","interface Merger {\n  (target: any, ...sources: Array<any>): any;\n}\n\nconst defaultMerge: Merger = function(target: any, ...sources: Array<any>) {\n  if (target === undefined || target === null) {\n    throw new TypeError(\"Cannot convert undefined or null to object\");\n  }\n\n  let output = Object(target);\n  for (let index = 1; index < arguments.length; index++) {\n    const source = arguments[index];\n    if (source !== undefined && source !== null) {\n      for (let nextKey in source) {\n        if (source.hasOwnProperty(nextKey)) {\n          output[nextKey] = source[nextKey];\n        }\n      }\n    }\n  }\n  return output;\n};\n\nexport { Merger, defaultMerge };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/merge.ts\n **/","interface Listener {\n  (data: any): any;\n}\n\ninterface Emitter {\n  (data: any): any;\n}\n\ninterface Wire {\n  emit: Emitter;\n  listen(listener: Listener): any;\n}\n\ninterface WireCreator {\n  (wireName?: string): Wire;\n}\n\nconst defaultWire: WireCreator = (function() {\n  let wires = {};\n  let nextWireId = 1;\n\n  const createWire = function(): Wire {\n    let listener: Listener = null;\n    const listen = (lstnr: Listener) => listener = lstnr;\n    const emit = (data: any) => listener(data);\n\n    return { emit, listen };\n  };\n\n  return function(wireName: string) {\n    let name = wireName;\n    if (!name) {\n      name = \"wire_\" + nextWireId;\n      nextWireId++;\n    }\n    let theWire: Wire = wires[name];\n    if (!theWire) {\n      theWire = createWire();\n      wires[name] = theWire;\n    }\n    return theWire;\n  };\n})();\n\nexport { Emitter, Listener, Wire, WireCreator, defaultWire };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/wire.ts\n **/"],"sourceRoot":""}