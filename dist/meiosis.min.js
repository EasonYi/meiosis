!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.meiosis=t():n.meiosis=t()}(this,function(){return function(n){function t(r){if(e[r])return e[r].exports;var u=e[r]={exports:{},id:r,loaded:!1};return n[r].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var e={};return t.m=n,t.c=e,t.p="",t(0)}([function(n,t,e){"use strict";function r(n){for(var e in n)t.hasOwnProperty(e)||(t[e]=n[e])}r(e(1))},function(n,t,e){"use strict";function r(n){var t=u.stream(),e=u.stream([]),r=u.map(s("receive"),e),o=u.map(function(n){return function(t,e){return n.reduce(function(n,t){return t(n,e)},t)}},r),i=u.scan(function(n,t){return o()(n,t)},n.initialModel,t),a=u.map(s("state"),e),c=u.map(function(n){return function(t){return n.reduce(function(n,e){return e(t,n)},JSON.parse(JSON.stringify(t)))}},a),f=u.combine(function(n,t){return t()(n())},[i,c]),d=u.map(s("nextAction"),e),p=u.map(function(n){return function(t,e){return n.forEach(function(n){return n(t,e)})}},d);return u.on(function(n){return t()&&p()(n,t())},i),{propose:t,components:e,model:i,stateFn:c,state:f}}var u=e(2),o=function(n){return function(t){return t[n]}},i=function(n){return n},s=function(n){return function(t){return t.map(o(n)).filter(i)}};t.newInstance=r},function(n,t,e){"use strict";function r(n){return!!(n&&n.constructor&&n.call&&n.apply)}function u(){return!0}function o(n,t){var e,r,o,i,s=f([],u);for(o=[],i=[],e=0;e<t.length;++e)void 0!==t[e]&&(o.push(t[e]),void 0!==t[e].end&&i.push(t[e].end));return r=f(o,n),r.depsChanged=[],r.fnArgs=r.deps.concat([r,r.depsChanged]),r.end=s,s.listeners.push(r),y(i,s),s.deps=i,p(r),r}function i(n){return q.map(n,this)}function s(n){var t=this;return o(function(n,t,e){e(n.val(t.val))},[t,n])}function a(){return"stream("+this.val+")"}function c(){function n(t){return 0===arguments.length?n.val:(g(n,t),n)}return n.hasVal=!1,n.val=void 0,n.vals=[],n.listeners=[],n.queued=!1,n.end=void 0,n.map=i,n.ap=s,n.of=q.stream,n.toString=a,n}function f(n,t){var e=c();return e.fn=t,e.deps=n,e.depsMet=!1,e.depsChanged=n.length>0?[]:void 0,e.shouldUpdate=!1,y(n,e),e}function d(n){return n.depsMet=n.deps.every(function(n){return n.hasVal}),!n.depsMet}function p(n){if(!(n.depsMet!==!0&&d(n)||void 0!==n.end&&n.end.val===!0)){if(void 0!==M)return void A.push(n);M=n,n.depsChanged&&(n.fnArgs[n.fnArgs.length-1]=n.depsChanged);var t=n.fn.apply(n.fn,n.fnArgs);void 0!==t&&n(t),M=void 0,void 0!==n.depsChanged&&(n.depsChanged=[]),n.shouldUpdate=!1,j===!1&&v()}}function l(n){var t,e,r,u=n.listeners;for(t=0;t<u.length;++t)r=u[t],r.end===n?b(r):(void 0!==r.depsChanged&&r.depsChanged.push(n),r.shouldUpdate=!0,h(r));for(;U>=0;--U)e=O[U],e.shouldUpdate===!0&&p(e),e.queued=!1}function h(n){var t,e=n.listeners;if(n.queued===!1){for(n.queued=!0,t=0;t<e.length;++t)h(e[t]);O[++U]=n}}function v(){for(j=!0;A.length>0;){var n=A.shift();n.vals.length>0&&(n.val=n.vals.shift()),l(n)}j=!1}function g(n,t){return void 0!==t&&null!==t&&r(t.then)?void t.then(n):(n.val=t,n.hasVal=!0,void(void 0===M?(j=!0,l(n),A.length>0?v():j=!1):M===n?m(n,n.listeners):(n.vals.push(t),A.push(n))))}function m(n,t){var e,r;for(e=0;e<t.length;++e)r=t[e],r.end!==n?(void 0!==r.depsChanged&&r.depsChanged.push(n),r.shouldUpdate=!0):b(r)}function y(n,t){for(var e=0;e<n.length;++e)n[e].listeners.push(t)}function x(n,t){var e=t.indexOf(n);t[e]=t[t.length-1],t.length--}function C(n){for(var t=0;t<n.deps.length;++t)x(n,n.deps[t].listeners);n.deps.length=0}function b(n){void 0!==n.deps&&C(n),void 0!==n.end&&C(n.end)}function w(){}var M,V=e(3),A=[],O=[],U=-1,j=!1,q={};q.stream=function(n){var t=f([],u),e=c();return e.end=t,e.fnArgs=[],t.listeners.push(e),arguments.length>0&&e(n),e},q.combine=V(2,o),q.isStream=function(n){return r(n)&&"hasVal"in n},q.immediate=function(n){return n.depsMet===!1&&(n.depsMet=!0,p(n)),n},q.endsOn=function(n,t){return C(t.end),n.listeners.push(t.end),t.end.deps.push(n),t},q.map=V(2,function(n,t){return o(function(t,e){e(n(t.val))},[t])}),q.on=V(2,function(n,t){return o(function(t){n(t.val)},[t])}),q.scan=V(3,function(n,t,e){var r=o(function(e,r){r(t=n(t,e.val))},[e]);return r.hasVal||r(t),r}),q.merge=V(2,function(n,t){var e=q.immediate(o(function(n,t,e,r){r[0]?e(r[0]()):n.hasVal?e(n.val):t.hasVal&&e(t.val)},[n,t]));return q.endsOn(o(function(){return!0},[n.end,t.end]),e),e}),q.transduce=V(2,function(n,t){return n=n(new w),o(function(t,e){var r=n["@@transducer/step"](void 0,t.val);return r&&r["@@transducer/reduced"]===!0?(e.end(!0),r["@@transducer/value"]):r},[t])}),q.curryN=V,w.prototype["@@transducer/init"]=function(){},w.prototype["@@transducer/result"]=function(){},w.prototype["@@transducer/step"]=function(n,t){return t},n.exports=q},function(n,t,e){var r=e(4),u=e(5),o=e(7),i=e(8);n.exports=o(function(n,t){return 1===n?u(t):r(n,i(n,[],t))})},function(n,t){n.exports=function(n,t){switch(n){case 0:return function(){return t.apply(this,arguments)};case 1:return function(n){return t.apply(this,arguments)};case 2:return function(n,e){return t.apply(this,arguments)};case 3:return function(n,e,r){return t.apply(this,arguments)};case 4:return function(n,e,r,u){return t.apply(this,arguments)};case 5:return function(n,e,r,u,o){return t.apply(this,arguments)};case 6:return function(n,e,r,u,o,i){return t.apply(this,arguments)};case 7:return function(n,e,r,u,o,i,s){return t.apply(this,arguments)};case 8:return function(n,e,r,u,o,i,s,a){return t.apply(this,arguments)};case 9:return function(n,e,r,u,o,i,s,a,c){return t.apply(this,arguments)};case 10:return function(n,e,r,u,o,i,s,a,c,f){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}},function(n,t,e){var r=e(6);n.exports=function(n){return function t(e){return 0===arguments.length||r(e)?t:n.apply(this,arguments)}}},function(n,t){n.exports=function(n){return null!=n&&"object"==typeof n&&n["@@functional/placeholder"]===!0}},function(n,t,e){var r=e(5),u=e(6);n.exports=function(n){return function t(e,o){switch(arguments.length){case 0:return t;case 1:return u(e)?t:r(function(t){return n(e,t)});default:return u(e)&&u(o)?t:u(e)?r(function(t){return n(t,o)}):u(o)?r(function(t){return n(e,t)}):n(e,o)}}}},function(n,t,e){var r=e(4),u=e(6);n.exports=function n(t,e,o){return function(){for(var i=[],s=0,a=t,c=0;c<e.length||s<arguments.length;){var f;c<e.length&&(!u(e[c])||s>=arguments.length)?f=e[c]:(f=arguments[s],s+=1),i[c]=f,u(f)||(a-=1),c+=1}return a<=0?o.apply(this,i):r(a,n(t,i,o))}}}])});
//# sourceMappingURL=meiosis.min.js.map