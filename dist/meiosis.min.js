!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.meiosis=t():n.meiosis=t()}(this,function(){return function(n){function t(r){if(e[r])return e[r].exports;var o=e[r]={exports:{},id:r,loaded:!1};return n[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var e={};return t.m=n,t.c=e,t.p="",t(0)}([function(n,t,e){"use strict";function r(n){for(var e in n)t.hasOwnProperty(e)||(t[e]=n[e])}r(e(1))},function(n,t,e){"use strict";function r(){var n=i.stream(),t=function(t){if(!t.initialModel||!t.components)throw new Error("Please specify initialModel and components.");var e=function(n,t){return t.map(f(n)).filter(a)},r=function(n,t){var e=t||[];e.forEach(function(t){n.push(t),r(n,t.components)})},o=[];r(o,t.components);var u=e("initialModel",o),c=u.reduce(function(n,t){return t(n)},t.initialModel),p=e("receive",o),l=function(n,t){return p.reduce(function(n,e){return e(n,t)},n)},d=i.scan(l,c,n),h=e("state",o),v=function(n){return h.reduce(function(t,e){return e(n,t)},s(n))},g=i.map(v,d),y=e("nextAction",o),m=function(n,t){return y.forEach(function(e){return e(n,t)})};return i.on(function(t){return n()&&m(t,n())},d),{model:d,stateFn:v,state:g}};return{propose:n,run:t}}function o(n){var t=n.component,e=n.path,r={receive:t.receive&&function(n,r){var o=c.get(n,e);return o&&t.receive(o,r),n},nextAction:t.nextAction&&function(n,r){var o=c.get(n,e);o&&t.nextAction(o,r)},state:t.state&&function(n,r){var o=c.get(n,e),u=c.get(r,e);return o&&u&&c.set(r,e,t.state(o,u)),r}};return r}function u(n){var t={receive:function(t,e){return n.component.receive&&n.component.receive(t,e),n.getComponentIds(t).forEach(function(r){var o=n.getComponentById(r);o.receive&&o.receive(t,e)}),t},state:function(t,e){return n.component.state&&n.component.state(t,e),n.getComponentIds(t).forEach(function(r){var o=n.getComponentById(r);o.state&&o.state(t,e)}),e},nextAction:function(t,e){n.component.nextAction&&n.component.nextAction(t,e),n.getComponentIds(t).forEach(function(r){var o=n.getComponentById(r);o.nextAction&&o.nextAction(t,e)})}};return t}var i=e(2),c=e(9),s=function(n){return JSON.parse(JSON.stringify(n))},f=function(n){return function(t){return t[n]}},a=function(n){return n};t.newInstance=r,t.nestComponent=o,t.componentContainer=u;var p=r(),l=p.propose;t.propose=l;var d=p.run;t.run=d,t.combine=i.combine,t.map=i.map,t.merge=i.merge,t.on=i.on,t.scan=i.scan},function(n,t,e){"use strict";function r(n){return!!(n&&n.constructor&&n.call&&n.apply)}function o(){return!0}function u(n,t){var e,r,u,i,c=a([],o);for(u=[],i=[],e=0;e<t.length;++e)void 0!==t[e]&&(u.push(t[e]),void 0!==t[e].end&&i.push(t[e].end));return r=a(u,n),r.depsChanged=[],r.fnArgs=r.deps.concat([r,r.depsChanged]),r.end=c,c.listeners.push(r),m(i,c),c.deps=i,l(r),r}function i(n){return P.map(n,this)}function c(n){var t=this;return u(function(n,t,e){e(n.val(t.val))},[t,n])}function s(){return"stream("+this.val+")"}function f(){function n(t){return 0===arguments.length?n.val:(g(n,t),n)}return n.hasVal=!1,n.val=void 0,n.vals=[],n.listeners=[],n.queued=!1,n.end=void 0,n.map=i,n.ap=c,n.of=P.stream,n.toString=s,n}function a(n,t){var e=f();return e.fn=t,e.deps=n,e.depsMet=!1,e.depsChanged=n.length>0?[]:void 0,e.shouldUpdate=!1,m(n,e),e}function p(n){return n.depsMet=n.deps.every(function(n){return n.hasVal}),!n.depsMet}function l(n){if(!(n.depsMet!==!0&&p(n)||void 0!==n.end&&n.end.val===!0)){if(void 0!==j)return void O.push(n);j=n,n.depsChanged&&(n.fnArgs[n.fnArgs.length-1]=n.depsChanged);var t=n.fn.apply(n.fn,n.fnArgs);void 0!==t&&n(t),j=void 0,void 0!==n.depsChanged&&(n.depsChanged=[]),n.shouldUpdate=!1,E===!1&&v()}}function d(n){var t,e,r,o=n.listeners;for(t=0;t<o.length;++t)r=o[t],r.end===n?A(r):(void 0!==r.depsChanged&&r.depsChanged.push(n),r.shouldUpdate=!0,h(r));for(;M>=0;--M)e=w[M],e.shouldUpdate===!0&&l(e),e.queued=!1}function h(n){var t,e=n.listeners;if(n.queued===!1){for(n.queued=!0,t=0;t<e.length;++t)h(e[t]);w[++M]=n}}function v(){for(E=!0;O.length>0;){var n=O.shift();n.vals.length>0&&(n.val=n.vals.shift()),d(n)}E=!1}function g(n,t){return void 0!==t&&null!==t&&r(t.then)?void t.then(n):(n.val=t,n.hasVal=!0,void(void 0===j?(E=!0,d(n),O.length>0?v():E=!1):j===n?y(n,n.listeners):(n.vals.push(t),O.push(n))))}function y(n,t){var e,r;for(e=0;e<t.length;++e)r=t[e],r.end!==n?(void 0!==r.depsChanged&&r.depsChanged.push(n),r.shouldUpdate=!0):A(r)}function m(n,t){for(var e=0;e<n.length;++e)n[e].listeners.push(t)}function x(n,t){var e=t.indexOf(n);t[e]=t[t.length-1],t.length--}function b(n){for(var t=0;t<n.deps.length;++t)x(n,n.deps[t].listeners);n.deps.length=0}function A(n){void 0!==n.deps&&b(n),void 0!==n.end&&b(n.end)}function C(){}var j,I=e(3),O=[],w=[],M=-1,E=!1,P={};P.stream=function(n){var t=a([],o),e=f();return e.end=t,e.fnArgs=[],t.listeners.push(e),arguments.length>0&&e(n),e},P.combine=I(2,u),P.isStream=function(n){return r(n)&&"hasVal"in n},P.immediate=function(n){return n.depsMet===!1&&(n.depsMet=!0,l(n)),n},P.endsOn=function(n,t){return b(t.end),n.listeners.push(t.end),t.end.deps.push(n),t},P.map=I(2,function(n,t){return u(function(t,e){e(n(t.val))},[t])}),P.on=I(2,function(n,t){return u(function(t){n(t.val)},[t])}),P.scan=I(3,function(n,t,e){var r=u(function(e,r){r(t=n(t,e.val))},[e]);return r.hasVal||r(t),r}),P.merge=I(2,function(n,t){var e=P.immediate(u(function(n,t,e,r){r[0]?e(r[0]()):n.hasVal?e(n.val):t.hasVal&&e(t.val)},[n,t]));return P.endsOn(u(function(){return!0},[n.end,t.end]),e),e}),P.transduce=I(2,function(n,t){return n=n(new C),u(function(t,e){var r=n["@@transducer/step"](void 0,t.val);return r&&r["@@transducer/reduced"]===!0?(e.end(!0),r["@@transducer/value"]):r},[t])}),P.curryN=I,C.prototype["@@transducer/init"]=function(){},C.prototype["@@transducer/result"]=function(){},C.prototype["@@transducer/step"]=function(n,t){return t},n.exports=P},function(n,t,e){var r=e(4),o=e(5),u=e(7),i=e(8);n.exports=u(function(n,t){return 1===n?o(t):r(n,i(n,[],t))})},function(n,t){n.exports=function(n,t){switch(n){case 0:return function(){return t.apply(this,arguments)};case 1:return function(n){return t.apply(this,arguments)};case 2:return function(n,e){return t.apply(this,arguments)};case 3:return function(n,e,r){return t.apply(this,arguments)};case 4:return function(n,e,r,o){return t.apply(this,arguments)};case 5:return function(n,e,r,o,u){return t.apply(this,arguments)};case 6:return function(n,e,r,o,u,i){return t.apply(this,arguments)};case 7:return function(n,e,r,o,u,i,c){return t.apply(this,arguments)};case 8:return function(n,e,r,o,u,i,c,s){return t.apply(this,arguments)};case 9:return function(n,e,r,o,u,i,c,s,f){return t.apply(this,arguments)};case 10:return function(n,e,r,o,u,i,c,s,f,a){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}},function(n,t,e){var r=e(6);n.exports=function(n){return function t(e){return 0===arguments.length||r(e)?t:n.apply(this,arguments)}}},function(n,t){n.exports=function(n){return null!=n&&"object"==typeof n&&n["@@functional/placeholder"]===!0}},function(n,t,e){var r=e(5),o=e(6);n.exports=function(n){return function t(e,u){switch(arguments.length){case 0:return t;case 1:return o(e)?t:r(function(t){return n(e,t)});default:return o(e)&&o(u)?t:o(e)?r(function(t){return n(t,u)}):o(u)?r(function(t){return n(e,t)}):n(e,u)}}}},function(n,t,e){var r=e(4),o=e(6);n.exports=function n(t,e,u){return function(){for(var i=[],c=0,s=t,f=0;f<e.length||c<arguments.length;){var a;f<e.length&&(!o(e[f])||c>=arguments.length)?a=e[f]:(a=arguments[c],c+=1),i[f]=a,o(a)||(s-=1),f+=1}return s<=0?u.apply(this,i):r(s,n(t,i,u))}}},function(n,t,e){var r,o,u;!function(e,i){"use strict";"object"==typeof n&&"object"==typeof n.exports?n.exports=i():(o=[],r=i,u="function"==typeof r?r.apply(t,o):r,!(void 0!==u&&(n.exports=u)))}(this,function(){"use strict";function n(n,t){return null!=n&&Object.prototype.hasOwnProperty.call(n,t)}function t(t){if(!t)return!0;if(s(t)&&0===t.length)return!0;if("string"!=typeof t){for(var e in t)if(n(t,e))return!1;return!0}return!1}function e(n){return c.call(n)}function r(n){return"object"==typeof n&&"[object Object]"===e(n)}function o(n){return"boolean"==typeof n||"[object Boolean]"===e(n)}function u(n){var t=parseInt(n);return t.toString()===n?t:n}function i(e){function i(t,r){if(e.includeInheritedProps||"number"==typeof r&&Array.isArray(t)||n(t,r))return t[r]}function c(n,t,e,r){if("number"==typeof t&&(t=[t]),!t||0===t.length)return n;if("string"==typeof t)return c(n,t.split(".").map(u),e,r);var o=t[0],s=i(n,o);return 1===t.length?(void 0!==s&&r||(n[o]=e),s):(void 0===s&&("number"==typeof t[1]?n[o]=[]:n[o]={}),c(n[o],t.slice(1),e,r))}e=e||{};var f=function(n){return Object.keys(f).reduce(function(t,e){return"create"===e?t:("function"==typeof f[e]&&(t[e]=f[e].bind(f,n)),t)},{})};return f.has=function(t,r){if("number"==typeof r?r=[r]:"string"==typeof r&&(r=r.split(".")),!r||0===r.length)return!!t;for(var o=0;o<r.length;o++){var i=u(r[o]);if(!("number"==typeof i&&s(t)&&i<t.length||(e.includeInheritedProps?i in Object(t):n(t,i))))return!1;t=t[i]}return!0},f.ensureExists=function(n,t,e){return c(n,t,e,!0)},f.set=function(n,t,e,r){return c(n,t,e,r)},f.insert=function(n,t,e,r){var o=f.get(n,t);r=~~r,s(o)||(o=[],f.set(n,t,o)),o.splice(r,0,e)},f.empty=function(e,u){if(!t(u)&&null!=e){var i,c;if(i=f.get(e,u)){if("string"==typeof i)return f.set(e,u,"");if(o(i))return f.set(e,u,!1);if("number"==typeof i)return f.set(e,u,0);if(s(i))i.length=0;else{if(!r(i))return f.set(e,u,null);for(c in i)n(i,c)&&delete i[c]}}}},f.push=function(n,t){var e=f.get(n,t);s(e)||(e=[],f.set(n,t,e)),e.push.apply(e,Array.prototype.slice.call(arguments,2))},f.coalesce=function(n,t,e){for(var r,o=0,u=t.length;o<u;o++)if(void 0!==(r=f.get(n,t[o])))return r;return e},f.get=function(n,t,e){if("number"==typeof t&&(t=[t]),!t||0===t.length)return n;if(null==n)return e;if("string"==typeof t)return f.get(n,t.split("."),e);var r=u(t[0]),o=i(n,r);return void 0===o?e:1===t.length?o:f.get(n[r],t.slice(1),e)},f.del=function(n,e){if("number"==typeof e&&(e=[e]),null==n)return n;if(t(e))return n;if("string"==typeof e)return f.del(n,e.split("."));var r=u(e[0]),o=i(n,r);if(null==o)return o;if(1===e.length)s(n)?n.splice(r,1):delete n[r];else if(void 0!==n[r])return f.del(n[r],e.slice(1));return n},f}var c=Object.prototype.toString,s=Array.isArray||function(n){return"[object Array]"===c.call(n)},f=i();return f.create=i,f.withInheritedProps=i({includeInheritedProps:!0}),f})}])});
//# sourceMappingURL=meiosis.min.js.map