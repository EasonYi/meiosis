!function(e,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports.meiosis=o():e.meiosis=o()}(this,function(){return function(e){function o(t){if(n[t])return n[t].exports;var r=n[t]={exports:{},id:t,loaded:!1};return e[t].call(r.exports,r,r.exports,o),r.loaded=!0,r.exports}var n={};return o.m=e,o.c=n,o.p="",o(0)}([function(e,o,n){"use strict";function t(e){for(var n in e)o.hasOwnProperty(n)||(o[n]=e[n])}t(n(1)),t(n(2))},function(e,o,n){"use strict";function t(e){var o=[],n=[],t=[],u=[],c=e&&e.rootWire||r.defaultWireCreator(),l=e&&e.componentWire||r.defaultWireCreator(),f=c("meiosis_"+s++),d=l(),p=d.emit,v=null,m=0,E=function(e){if(!(e&&(e.actions||e.nextAction||e.initialModel||e.ready||e.receive||e.view||e.postRender||e.setup)))throw new Error("Please specify a config when calling createComponent.");if(null===v){var r={};v=r}var i=e.initialModel,s=!1;if("function"==typeof i?(v=i(v),s=m>0):i&&(v=i,m++,s=m>1),s)throw new Error("When more than one initialModel is used, they must all be functions.");var a=e.actions?e.actions(p):p,c=e.setup;c&&c(a);var l=e.receive;l&&o.push(l);var f=e.ready;f&&n.push(function(){return f(a)});var d=e.postRender;d&&t.push(d);var E=e.nextAction;return E&&u.push(function(e,o){return E(e,o,a)}),function(o){return e.view?e.view(o,a):void 0}},g=function(e,r){d.listen(function(e){for(var n=!0,t=0;t<o.length;t++){var r=o[t],s=r(v,e);if(s===i){n=!1;break}v=s}n&&(f.emit(v),u.forEach(function(o){return o(v,e)}))});var s=function(o){var n=e(o,r,p);return t.forEach(function(e){return e(o)}),n};s.initialModel=v;var c=s;f.listen(c),f.emit(v),n.forEach(function(e){return e()});var l=function(){return(new Date).toISOString().substring(11)},m=window.__MEIOSIS_TRACER_DEVTOOLS_GLOBAL_HOOK__;if(m){console.log(l(),"meiosis initializing devtool");var g=a(v),w=[],I=!1;E({receive:function(e,o){return I?(console.log(l(),"meiosis devtool initialized, sending receive"),window.postMessage({type:"MEIOSIS_RECEIVE",model:e,proposal:o},"*")):(console.log(l(),"meiosis devtool not initialized, buffering receive"),w.push({model:a(e),proposal:o})),e}}),window.addEventListener("message",function(e){if("MEIOSIS_RENDER_ROOT"===e.data.type)console.log(l(),"meiosis render root from devtool"),c(e.data.model);else if("MEIOSIS_REQUEST_INITIAL_MODEL"===e.data.type){console.log(l(),"meiosis received devtool initialize"),window.postMessage({type:"MEIOSIS_INITIAL_MODEL",model:g},"*"),I=!0;for(var o=0;o<w.length;o++){var n=w[o],t=n.model,r=n.proposal;console.log(l(),"meiosis sending buffered receive"),window.postMessage({type:"MEIOSIS_RECEIVE",model:t,proposal:r},"*")}}})}else console.log(l(),"meiosis no devtool");return c};return{createComponent:E,run:g}}var r=n(2),i={};o.REFUSE_PROPOSAL=i;var s=1,a=function(e){return JSON.parse(JSON.stringify(e))};o.init=t;var u=t(),c=u.createComponent;o.createComponent=c;var l=u.run;o.run=l},function(e,o){"use strict";function n(){var e=function(){var e=null,o=function(o){return e=o},n=function(o){return e(o)};return{emit:n,listen:o}};return function(o){var n=o;n||(n="wire_"+r,r++);var i=t[n];return i||(i=e(),t[n]=i),i}}var t={},r=1;o.defaultWireCreator=n}])});
//# sourceMappingURL=meiosis.min.js.map